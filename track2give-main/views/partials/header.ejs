<!-- Top Navigation for Desktop -->
<nav class="navbar desktop-nav">
  <div class="logo">
    <a href="/" style="text-decoration: none; color: inherit">üçÉ Track2Give</a>
  </div>

  <!-- Mobile Menu Toggle for non-logged-in users -->
  <% if (!user) { %>
  <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
  <% } %>

  <ul class="nav-links">
    <% if (user) { %>
    <li>
      <a
        href="/dashboard"
        class="<%= currentPage === 'dashboard' ? 'active' : '' %>"
        >Dashboard</a
      >
    </li>
    <li>
      <a
        href="/food-items"
        class="<%= currentPage === 'food-items' ? 'active' : '' %>"
        >My Food</a
      >
    </li>
    <li>
      <a
        href="/recipes"
        class="<%= currentPage === 'recipes' ? 'active' : '' %>"
        >Recipes</a
      >
    </li>
    <li>
      <a href="/donate" class="<%= currentPage === 'donate' ? 'active' : '' %>"
        >Donate</a
      >
    </li>
    <li>
      <a
        href="/community"
        class="<%= currentPage === 'community' ? 'active' : '' %>"
        >Community</a
      >
    </li>
    <li>
      <a
        href="/settings"
        class="<%= currentPage === 'settings' ? 'active' : '' %>"
        >Settings</a
      >
    </li>
    <li>
      <form action="/logout" method="POST" style="display: inline">
        <button type="submit" class="logout-btn">Logout</button>
      </form>
    </li>
    <% } else { %>
    <li><a href="#features">Features</a></li>
    <li><a href="#impact">Impact</a></li>
    <li class="auth-button-item"><a href="/login" class="login-btn">Login</a></li>
    <li class="auth-button-item"><a href="/register" class="register-btn">Register</a></li>
    <% } %>
  </ul>
</nav>

<!-- Bottom Navigation for Mobile -->
<% if (user) { %>
<nav class="mobile-nav">
  <a
    href="/dashboard"
    class="mobile-nav-item <%= currentPage === 'dashboard' ? 'active' : '' %>"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="24"
      height="24"
      fill="currentColor"
    >
      <path
        d="M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V9.48907C3 9.18048 3.14247 8.88917 3.38606 8.69972L11.3861 2.47749C11.7472 2.19663 12.2528 2.19663 12.6139 2.47749L20.6139 8.69972C20.8575 8.88917 21 9.18048 21 9.48907V20ZM19 19V9.97815L12 4.53371L5 9.97815V19H19Z"
      ></path>
    </svg>
    <span>Home</span>
  </a>
  <a
    href="/food-items"
    class="mobile-nav-item <%= currentPage === 'food-items' ? 'active' : '' %>"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="24"
      height="24"
      fill="currentColor"
    >
      <path
        d="M18.998 1C19.5503 1 19.998 1.44772 19.998 2V22C19.998 22.5523 19.5503 23 18.998 23H4.99805C4.44576 23 3.99805 22.5523 3.99805 22V2C3.99805 1.44772 4.44576 1 4.99805 1H18.998ZM17.998 12H5.99805V21H17.998V12ZM9.99805 14V18H7.99805V14H9.99805ZM17.998 3H5.99805V10H17.998V3ZM9.99805 5V8H7.99805V5H9.99805Z"
      ></path>
    </svg>
    <span>My Food</span>
  </a>
  <a
    href="/scan"
    class="mobile-nav-item <%= currentPage === 'scan' ? 'active' : '' %>"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="24"
      height="24"
      fill="currentColor"
    >
      <path
        d="M9.85802 19.71L12 16H5.07026C6.10692 17.7921 7.8188 19.1447 9.85802 19.71ZM4.25204 14H8.5359L5.07103 7.99867C4.38987 9.17566 4 10.5423 4 12C4 12.6906 4.08751 13.3608 4.25204 14ZM6.39496 6.29179L8.5359 10L12 4C9.8171 4 7.8384 4.87429 6.39496 6.29179ZM14.142 4.28998L12 8H18.9297C17.8931 6.20791 16.1812 4.85529 14.142 4.28998ZM19.748 10H15.4641L18.929 16.0013C19.6101 14.8243 20 13.4577 20 12C20 11.3094 19.9125 10.6392 19.748 10ZM17.605 17.7082L15.4641 14L12 20C14.1829 20 16.1616 19.1257 17.605 17.7082ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM13.1547 10H10.8453L9.6906 12L10.8453 14H13.1547L14.3094 12L13.1547 10Z"
      ></path>
    </svg>
    <span>Scan</span>
  </a>
  <a
    href="/recipes"
    class="mobile-nav-item <%= currentPage === 'recipes' ? 'active' : '' %>"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="24"
      height="24"
      fill="currentColor"
    >
      <path
        d="M13 21V23.5L10 21.5L7 23.5V21H6.5C4.567 21 3 19.433 3 17.5V5C3 3.34315 4.34315 2 6 2H20C20.5523 2 21 2.44772 21 3V20C21 20.5523 20.5523 21 20 21H13ZM13 19H19V16H6.5C5.67157 16 5 16.6716 5 17.5C5 18.3284 5.67157 19 6.5 19H7V17H13V19ZM19 14V4H6V14.0354C6.1633 14.0121 6.33024 14 6.5 14H19ZM7 5H9V7H7V5ZM7 8H9V10H7V8ZM7 11H9V13H7V11Z"
      ></path>
    </svg>
    <span>Recipes</span>
  </a>
  <a
    href="/settings"
    class="mobile-nav-item <%= currentPage === 'settings' ? 'active' : '' %>"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      width="24"
      height="24"
      fill="currentColor"
    >
      <path
        d="M12 14V16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM14.5946 18.8115C14.5327 18.5511 14.5 18.2794 14.5 18C14.5 17.7207 14.5327 17.449 14.5945 17.1886L13.6029 16.6161L14.6029 14.884L15.5952 15.4569C15.9883 15.0851 16.4676 14.8034 17 14.6449V13.5H19V14.6449C19.5324 14.8034 20.0116 15.0851 20.4047 15.4569L21.3971 14.8839L22.3972 16.616L21.4055 17.1885C21.4673 17.449 21.5 17.7207 21.5 18C21.5 18.2793 21.4673 18.551 21.4055 18.8114L22.3972 19.3839L21.3972 21.116L20.4048 20.543C20.0117 20.9149 19.5325 21.1966 19.0001 21.355V22.5H17.0001V21.3551C16.4677 21.1967 15.9884 20.915 15.5953 20.5431L14.603 21.1161L13.6029 19.384L14.5946 18.8115ZM18 19.5C18.8284 19.5 19.5 18.8284 19.5 18C19.5 17.1716 18.8284 16.5 18 16.5C17.1716 16.5 16.5 17.1716 16.5 18C16.5 18.8284 17.1716 19.5 18 19.5Z"
      ></path>
    </svg>
    <span>Settings</span>
  </a>
</nav>
<% } %>

<style>
  .navbar {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    padding: 1rem 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .logo {
    font-size: 1.2rem;
    font-weight: 700;
  }

  .logo-image {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    object-fit: cover;
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.12);
  }

  .brand-text {
    font-size: 1.2rem;
    font-weight: 700;
    background: linear-gradient(135deg, #10b981 0%, #f59e0b 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .nav-links {
    display: flex;
    gap: 2rem;
    list-style: none;
    align-items: center;
  }

  .nav-links a {
    text-decoration: none;
    color: #333;
    font-weight: 500;
    transition: color 0.3s;
  }

  .nav-links a:hover,
  .nav-links a.active {
    color: #10b981;
  }

  .login-btn,
  .logout-btn {
    /* static gradient applied inline to ensure consistent rendering */
    background: linear-gradient(135deg, #10b981 0%, #f59e0b 100%);
    color: white;
    padding: 0.5rem 1.5rem;
    border-radius: 25px;
    border: 2px solid transparent;
    cursor: pointer;
    font-weight: 500;
    transition: box-shadow 0.15s;
    display: inline-block;
    text-decoration: none;
    box-sizing: border-box;
  }

  .register-btn {
    background: white;
    color: #10b981;
    padding: 0.5rem 1.5rem;
    border-radius: 25px;
    border: 2px solid #10b981;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.15s;
    display: inline-block;
    text-decoration: none;
    box-sizing: border-box;
  }

  .login-btn:hover,
  .logout-btn:hover,
  .login-btn:focus,
  .logout-btn:focus {
    outline: none;
    /* no transform or color change on hover */
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
  }

  .register-btn:hover,
  .register-btn:focus {
    outline: none;
    background: #10b981;
    color: white;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
  }

  .login-btn:active,
  .logout-btn:active {
    transform: scale(0.98);
  }

  .register-btn:active {
    transform: scale(0.98);
  }

  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    gap: 4px;
    background: none;
    border: none;
    cursor: pointer;
  }

  .mobile-menu-toggle span {
    width: 25px;
    height: 3px;
    background: #333;
    border-radius: 2px;
  }

  @media (max-width: 768px) {
    .nav-links {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      flex-direction: column;
      padding: 1rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      gap: 0.75rem;
    }

    .nav-links.active {
      display: flex;
    }

    .mobile-menu-toggle {
      display: flex;
    }

    /* Style auth buttons in mobile menu */
    .nav-links li.auth-button-item {
      width: 100%;
      margin: 0.25rem 0;
    }

    .nav-links li.auth-button-item:first-of-type {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }

    .nav-links .login-btn,
    .nav-links .register-btn {
      width: 100%;
      text-align: center;
      display: block;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
    }
  }
</style>

<script>
  function toggleMobileMenu() {
    const navLinks = document.querySelector(".nav-links");
    navLinks.classList.toggle("active");
  }
</script>
